name: dwh-service
imagename: dwh
namespace: bbsoft


service:
  type: ClusterIP
  port: 8080


deployment:
  replica: 1
  podAntiAffinity: true
  imagePullSecrets:
    - docker-registry-secret
  probe:
    livenessProbe:
      enable: true
      probeType: http
      http:
        path: /actuator/health
        port: 8080
    readinessProbe:
      enable: true
      initialDelaySeconds: 10
      probeType: http
      http:
        path: /actuator/health
        port: 8080
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: "500m"
      memory: 1Gi
  restartPolicy: Always
  env:
    DATASOURCE_DATABASE: 'postgres'
    SERVER_PORT: '8080'
    KAFKA_REPLICATION-FACTOR: '1'
    MANAGEMENT_METRICS_EXPORT_STATSD_ENABLED: 'true'
    MANAGEMENT_METRICS_EXPORT_STATSD_HOST: 'telegraf-udp-lottery.mon.svc.cluster.local'
    MANAGEMENT_METRICS_CUSTOM_TAGS_SOURCE: 'dwh-service'
    DATASOURCE_MAX-POOL-SIZE: '30'
  envFromSecret:
    JWT_KEY:
      dwh-service-key: jwt-key
    KAFKA_ADDRESS:
      kafka-bbsoft-main-preprod-write: host
    DATASOURCE_ADDRESS:
      postgres-bbsoft-main-preprod-write: host
    DATASOURCE_PORT:
      postgres-bbsoft-main-preprod-write: port
    DATASOURCE_USERNAME:
      postgres-bbsoft-main-preprod-admin: superuser
    DATASOURCE_PASSWORD:
      postgres-bbsoft-main-preprod-admin: superuser-password


ingress:
  enable: false


hpa:
  enable: false